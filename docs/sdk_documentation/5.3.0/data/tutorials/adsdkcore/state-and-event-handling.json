{"sections":[{"kind":"hero","title":"Handling the state and events of advertising","chapter":"Working with the built-in capabilities of the SDK","estimatedTimeInMinutes":25,"content":[{"inlineContent":[{"type":"text","text":"This tutorial will help you observe and respond to changes in the state and events of advertisements. In it, we will continue the development of the application we started in the previous section."}],"type":"paragraph"}]},{"kind":"tasks","tasks":[{"title":"Observing the state of advertisements","stepsSection":[{"code":"01-state-event-handling.swift","media":null,"caption":[{"inlineContent":[{"type":"text","text":"As you may remember, our implementation is not entirely correct because we send the "},{"code":"ready","type":"codeVoice"},{"text":" state and pass ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement"},{"type":"text","text":" to "},{"type":"codeVoice","code":"AdView"},{"text":" without checking whether the advertising content has been loaded.","type":"text"}],"type":"paragraph"}],"content":[{"type":"paragraph","inlineContent":[{"text":"Let’s go back to the AdCell file.","type":"text"}]}],"runtimePreview":null,"type":"step"},{"code":"02-state-event-handling.swift","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"To access the current state of the ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement","isActive":true},{"text":", you can use the ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/state","type":"reference"},{"text":" property. However, in our case, we want to observe changes in this state. For this purpose, you can use ","type":"text"},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/stateStream","type":"reference","isActive":true},{"text":" or ","type":"text"},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/statePublisher","isActive":true,"type":"reference"},{"text":".","type":"text"}]}],"type":"step","caption":[{"type":"paragraph","inlineContent":[{"text":"The state of the advertisement is represented through the ","type":"text"},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState","type":"reference","isActive":true},{"text":" enum. Thanks to this, we can understand at which stage of the loading process our advertisement currently is.","type":"text"}]}],"media":null},{"media":null,"type":"step","caption":[],"content":[{"type":"paragraph","inlineContent":[{"text":"The next step is to respond to changes in the advertisement state in our ","type":"text"},{"code":"AdCellViewModel","type":"codeVoice"},{"text":". If the advertisement is in the ","type":"text"},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/loading","type":"reference","isActive":true},{"text":" or ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/caching"},{"text":" stage, we want to display the ","type":"text"},{"code":"loading","type":"codeVoice"},{"type":"text","text":" state of the advertisement. If the advertisement is "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/readyToPresent(metadata:)"},{"type":"text","text":", we want to send a signal to display the "},{"type":"codeVoice","code":"AdView"},{"type":"text","text":". If the advertisement encounters an "},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/error(_:)","isActive":true,"type":"reference"},{"type":"text","text":" during loading or decoding, we send an error state to our "},{"type":"codeVoice","code":"AdCell"},{"text":".","type":"text"}]}],"runtimePreview":null,"code":"03-state-event-handling.swift"}],"contentSection":[{"mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"text":"Observe the state of advertisements to react appropriately within the application.","type":"text"}]}],"kind":"contentAndMedia"}],"anchor":"Observing-the-state-of-advertisements"},{"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"You can handle errors as you see fit. In our application we will implement it in a way that when an error related to decoding is encountered, the advertisement will attempt to reload the content, and only after a second error is received, it will be displayed on the screen.","type":"text"}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}],"title":"Handling errors during the loading and decoding of advertisements","stepsSection":[{"media":null,"code":"03-state-event-handling.swift","content":[{"type":"paragraph","inlineContent":[{"text":"Let’s continue with our ","type":"text"},{"type":"codeVoice","code":"observeState()"},{"type":"text","text":" method."}]}],"type":"step","runtimePreview":null,"caption":[]},{"caption":[],"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"First, we need to understand if the error is related to decoding. If you are not using custom native renderers, the type of error you can get from the SDK will always be ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdError"},{"text":". Thanks to it, you can find out the reason of the error.","type":"text"}]}],"runtimePreview":null,"media":null,"code":"04-state-event-handling.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now let’s add a "},{"code":"retryCount","type":"codeVoice"},{"text":" property, which will keep track of how many times we have attempted to reload the advertisement. If we receive a ","type":"text"},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdError\/decoding","isActive":true,"type":"reference"},{"type":"text","text":" error and "},{"code":"retryCount","type":"codeVoice"},{"text":" is equal to zero, we will increment the ","type":"text"},{"type":"codeVoice","code":"retryCount"},{"type":"text","text":" by 1 and call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/reload()"},{"text":" method, which will attempt to make the request again.","type":"text"}]}],"code":"05-state-event-handling.swift","media":null,"type":"step","caption":[]}],"anchor":"Handling-errors-during-the-loading-and-decoding-of-advertisements"},{"anchor":"Observing-the-advertising-events","stepsSection":[{"code":"06-state-event-handling.swift","runtimePreview":null,"type":"step","caption":[],"content":[{"inlineContent":[{"text":"Let’s continue with our ","type":"text"},{"code":"AdCellViewModel","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"}],"media":null},{"media":null,"code":"07-state-event-handling.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"The SDK can send many events related to advertisements. It may be useful for you to observe them, for example, for debugging or other purposes. To do this, you can use "},{"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/eventStream","isActive":true},{"type":"text","text":" or "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/eventPublisher"},{"type":"text","text":"."}],"type":"paragraph"}],"caption":[]},{"content":[{"inlineContent":[{"type":"text","text":"Advertising events in the SDK are represented as the "},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdEvent","isActive":true,"type":"reference"},{"text":" enum. Let’s add the following logic – if the user tap on the advertisement, we want to find out which URL was associated with this event.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"caption":[{"inlineContent":[{"type":"text","text":"Note: in the case of a tap event, the URL can either represent the URL to which the user was redirected in the browser, or the URL that the SDK processed without the user’s knowledge."}],"type":"paragraph"}],"type":"step","media":null,"code":"08-state-event-handling.swift"},{"code":"09-state-event-handling.swift","content":[{"type":"paragraph","inlineContent":[{"text":"In addition, the SDK can observe the percentage of visibility of the advertisement on the screen and send events related to this to the server if it was configured in such a way on the server. This can be useful if you are displaying advertisements in a ","type":"text"},{"type":"codeVoice","code":"List"},{"type":"text","text":". Open the FirstScreen file."}]}],"media":null,"type":"step","caption":[],"runtimePreview":null},{"runtimePreview":null,"type":"step","caption":[],"media":null,"code":"10-state-event-handling.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Import AdSDKSwiftUI and add the "},{"code":"adsContainer()","type":"codeVoice"},{"type":"text","text":" modifier to your List. This allows the "},{"type":"codeVoice","code":"AdView"},{"type":"text","text":", which is in the hierarchy of the "},{"type":"codeVoice","code":"List"},{"type":"text","text":", to understand its percentage of visibility on the screen."}]}]},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"text":"Now, if your advertisement was configured on the server to track the percentage of visibility on the screen, you can observe ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdEvent\/viewable(percentage:url:metadata:)","isActive":true},{"text":" event.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"code":"11-state-event-handling.swift"}],"title":"Observing the advertising events","contentSection":[{"mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Observe the advertising events to respond to them in the application."}]}],"kind":"contentAndMedia"}]}]},{"title":"Defining the size of the advertisement","featuredEyebrow":"Tutorial","action":{"identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Defining-Size-Of-Ad","overridingTitle":"Get started","overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"type":"reference","isActive":true},"abstract":[{"type":"text","text":"This tutorial will teach you how to define the size of the advertisement, taking into account the aspect ratio parameter. In it, we will continue the development of the application we started in the previous section."}],"kind":"callToAction"}],"variants":[{"paths":["\/tutorials\/adsdkcore\/state-and-event-handling"],"traits":[{"interfaceLanguage":"swift"}]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/tutorials\/adsdkcore\/state-and-event-handling"]}],"identifier":{"url":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK","doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK\/$volume","doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK\/Working-with-the-built-in-capabilities-of-the-SDK"]],"reference":"doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK","modules":[{"projects":[{"sections":[{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-And-Display-Inline-Ads#First-steps-for-working-with-AdSDK"},{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-And-Display-Inline-Ads#Loading-and-displaying-advertisements"}],"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-And-Display-Inline-Ads"},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling","sections":[{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling#Observing-the-state-of-advertisements"},{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling#Handling-errors-during-the-loading-and-decoding-of-advertisements"},{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling#Observing-the-advertising-events"}]},{"sections":[{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Defining-Size-Of-Ad#Defining-the-size-of-the-advertisement"}],"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Defining-Size-Of-Ad"},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-and-Display-Interstitial-Ad","sections":[{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-and-Display-Interstitial-Ad#Interstitial-Ad-Object"},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-and-Display-Interstitial-Ad#Presenting-interstitial","kind":"task"}]},{"sections":[{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Global-AdRequest-Parameters#Modifying-global-parameters","kind":"task"}],"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Global-AdRequest-Parameters"}],"reference":"doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK\/Working-with-the-built-in-capabilities-of-the-SDK"},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK\/Extending-the-SDK-with-your-custom-advertisements","projects":[{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising","sections":[{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#Creating-a-business-layer"},{"kind":"task","reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#State-and-event-management"},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#Creating-a-presentation-layer","kind":"task"},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#Registering-a-renderer-in-the-SDK","kind":"task"}]},{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Load-And-Cache-Assets","sections":[{"reference":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Load-And-Cache-Assets#Asset-loading-and-caching","kind":"task"}]}]}]},"metadata":{"categoryPathComponent":"Meet-AdSDK","role":"project","title":"Handling the state and events of advertising","category":"Meet AdSDK"},"schemaVersion":{"major":0,"patch":0,"minor":3},"kind":"project","references":{"doc://com.adsdk.core/tutorials/AdSDKCore/Defining-Size-Of-Ad#Defining-the-size-of-the-advertisement":{"identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Defining-Size-Of-Ad#Defining-the-size-of-the-advertisement","type":"section","abstract":[{"type":"text","text":"This tutorial will teach you how to define the size of the advertisement, taking into account the aspect ratio parameter. In it, we will continue the development of the application we started in the previous section."}],"title":"Defining the size of the advertisement","url":"\/tutorials\/adsdkcore\/defining-size-of-ad#Defining-the-size-of-the-advertisement","kind":"section","role":"pseudoSymbol"},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement/stateStream":{"abstract":[{"type":"text","text":"Advertisement async state stream."}],"type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"stateStream","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:ScS","text":"AsyncStream","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"AdState","kind":"typeIdentifier","preciseIdentifier":"s:9AdSDKCore0A5StateO"},{"kind":"text","text":">"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/stateStream","title":"stateStream","url":"\/documentation\/adsdkcore\/advertisement\/statestream","required":true,"kind":"symbol"},"10-state-event-handling.swift":{"highlights":[{"line":3},{"line":16}],"syntax":"swift","fileName":"FirstScreen.swift","identifier":"10-state-event-handling.swift","type":"file","fileType":"swift","content":["import SwiftUI","import AdSDKCore","import AdSDKSwiftUI","","struct FirstScreen: View {","    @State var viewModel: FirstScreenViewModel","","    var body: some View {","        List {","            ForEach(viewModel.ads) { ad in","                AdCell(viewModel: ad)","            }","        }","        .listStyle(.plain)","        .clipped()","        .adsContainer()","    }","}","\/\/ ..."]},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement/reload()":{"title":"reload()","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/reload()","kind":"symbol","url":"\/documentation\/adsdkcore\/advertisement\/reload()","role":"symbol","abstract":[{"type":"text","text":"Makes a request for advertisement data to the server."}],"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"reload","kind":"identifier"},{"kind":"text","text":"()"}],"type":"topic","required":true},"doc://com.adsdk.core/tutorials/AdSDKCore/State-And-Event-Handling#Observing-the-state-of-advertisements":{"abstract":[{"type":"text","text":"This tutorial will help you observe and respond to changes in the state and events of advertisements. In it, we will continue the development of the application we started in the previous section."}],"type":"section","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling#Observing-the-state-of-advertisements","title":"Observing the state of advertisements","role":"pseudoSymbol","url":"\/tutorials\/adsdkcore\/state-and-event-handling#Observing-the-state-of-advertisements","kind":"section"},"02-state-event-handling.swift":{"type":"file","content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() {","        Task {","            for await state in ad.stateStream {","                print(state)","            }","        }","    }","","    \/\/ Combine","    \/*","    func observeState() {","        ad.statePublisher","            .sink { [weak self] state in","                guard let self else { return }","","                print(state)","            }","            .store(in: &subscriptions)","    }","    *\/","}","\/\/ ..."],"fileType":"swift","identifier":"02-state-event-handling.swift","fileName":"AdCell.swift","highlights":[{"line":12},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37}],"syntax":"swift"},"09-state-event-handling.swift":{"type":"file","content":["import SwiftUI","import AdSDKCore","","struct FirstScreen: View {","    @State var viewModel: FirstScreenViewModel","","    var body: some View {","        List {","            ForEach(viewModel.ads) { ad in","                AdCell(viewModel: ad)","            }","        }","        .listStyle(.plain)","        .clipped()","    }","}","\/\/ ..."],"identifier":"09-state-event-handling.swift","fileType":"swift","fileName":"FirstScreen.swift","highlights":[],"syntax":"swift"},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement/eventPublisher":{"title":"eventPublisher","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/eventPublisher","kind":"symbol","url":"\/documentation\/adsdkcore\/advertisement\/eventpublisher","role":"symbol","abstract":[{"type":"text","text":"Advertisement event publisher."}],"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"eventPublisher"},{"text":": ","kind":"text"},{"text":"AnyPublisher","preciseIdentifier":"s:7Combine12AnyPublisherV","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:9AdSDKCore0A5EventO","kind":"typeIdentifier","text":"AdEvent"},{"text":", ","kind":"text"},{"text":"Never","preciseIdentifier":"s:s5NeverO","kind":"typeIdentifier"},{"kind":"text","text":">"}],"type":"topic","required":true},"doc://com.adsdk.core/tutorials/AdSDKCore/Create-and-Display-Interstitial-Ad#Interstitial-Ad-Object":{"abstract":[{"type":"text","text":"A full-screen advertisement that fills the host app’s interface is known as an interstitial ad. In this tutorial we are going to add interstitial ad into our application."}],"type":"section","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-and-Display-Interstitial-Ad#Interstitial-Ad-Object","title":"Interstitial Ad Object","role":"pseudoSymbol","url":"\/tutorials\/adsdkcore\/create-and-display-interstitial-ad#Interstitial-Ad-Object","kind":"section"},"doc://com.adsdk.core/documentation/AdSDKCore/AdEvent/viewable(percentage:url:metadata:)":{"title":"AdEvent.viewable(percentage:url:metadata:)","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdEvent\/viewable(percentage:url:metadata:)","kind":"symbol","url":"\/documentation\/adsdkcore\/adevent\/viewable(percentage:url:metadata:)","role":"symbol","abstract":[{"type":"text","text":"Signals that the user has seen an advertisement."}],"fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"viewable"},{"text":"(","kind":"text"},{"text":"percentage","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:9AdSDKCore0A20VisibilityPercentageO","kind":"typeIdentifier","text":"AdVisibilityPercentage"},{"text":", ","kind":"text"},{"text":"url","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:10Foundation3URLV","text":"URL"},{"kind":"text","text":", "},{"text":"metadata","kind":"externalParam"},{"kind":"text","text":": "},{"text":"AdMetadata","kind":"typeIdentifier","preciseIdentifier":"s:9AdSDKCore0A8MetadataC"},{"kind":"text","text":")"}],"type":"topic"},"08-state-event-handling.swift":{"content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","    private var retryCount = Int.zero","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() { \/* ... *\/ }","","    func observeEvents() {","        Task {","            for await event in ad.eventStream {","                switch event {","                case let .tap(url, metadata):","                    print(\"The user tapped on the advertisement.\")","                    print(\"SDK processed the following URL: \\(url)\")","","                default: break","                }","            }","        }","    }","}","\/\/ ..."],"fileName":"AdCell.swift","type":"file","fileType":"swift","syntax":"swift","highlights":[{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29}],"identifier":"08-state-event-handling.swift"},"doc://com.adsdk.core/tutorials/Meet-AdSDK/Extending-the-SDK-with-your-custom-advertisements":{"title":"Extending the SDK with your custom advertisements","identifier":"doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK\/Extending-the-SDK-with-your-custom-advertisements","kind":"article","url":"\/tutorials\/meet-adsdk\/extending-the-sdk-with-your-custom-advertisements","role":"article","abstract":[],"type":"topic"},"doc://com.adsdk.core/tutorials/AdSDKCore/Creating-Customised-Advertising#Creating-a-presentation-layer":{"url":"\/tutorials\/adsdkcore\/creating-customised-advertising#Creating-a-presentation-layer","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#Creating-a-presentation-layer","kind":"section","abstract":[{"text":"In this tutorial, we will learn how to create custom ads using Nextgen AdSDK. This process is the same for both inline and interstitial ads.","type":"text"}],"title":"Creating a presentation layer","role":"pseudoSymbol","type":"section"},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement":{"kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Advertisement"}],"role":"symbol","type":"topic","url":"\/documentation\/adsdkcore\/advertisement","abstract":[{"text":"A key object interface describing the advertisement.","type":"text"}],"navigatorTitle":[{"text":"Advertisement","kind":"identifier"}],"title":"Advertisement","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement"},"doc://com.adsdk.core/documentation/AdSDKCore/AdError":{"url":"\/documentation\/adsdkcore\/aderror","kind":"symbol","navigatorTitle":[{"text":"AdError","kind":"identifier"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdError","abstract":[{"type":"text","text":"Type of SDK-related error."}],"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"AdError","kind":"identifier"}],"title":"AdError","type":"topic","role":"symbol"},"doc://com.adsdk.core/documentation/AdSDKCore/AdState/error(_:)":{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/error(_:)","kind":"symbol","abstract":[{"text":"Signals that an advertisement lifecycle error has occurred.","type":"text"}],"title":"AdState.error(_:)","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"text":"error","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP","text":"Error"},{"text":")","kind":"text"}],"type":"topic","role":"symbol","url":"\/documentation\/adsdkcore\/adstate\/error(_:)"},"doc://com.adsdk.core/tutorials/AdSDKCore/Global-AdRequest-Parameters":{"url":"\/tutorials\/adsdkcore\/global-adrequest-parameters","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Global-AdRequest-Parameters","kind":"project","abstract":[{"text":"We already know how to create an ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest"},{"text":". However, an ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest"},{"text":" can have additional parameters beyond those you pass during initialization. These additional parameters are global for all ","type":"text"},{"type":"codeVoice","code":"AdRequests"},{"text":". The SDK provides the ability to add global parameters once so that you don’t have to copy them when creating each ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest","type":"reference"},{"type":"text","text":"."}],"title":"Global AdRequest parameters","role":"project","type":"topic","estimatedTime":"10min"},"doc://com.adsdk.core/tutorials/AdSDKCore/State-And-Event-Handling#Handling-errors-during-the-loading-and-decoding-of-advertisements":{"kind":"section","role":"pseudoSymbol","type":"section","title":"Handling errors during the loading and decoding of advertisements","abstract":[{"type":"text","text":"This tutorial will help you observe and respond to changes in the state and events of advertisements. In it, we will continue the development of the application we started in the previous section."}],"url":"\/tutorials\/adsdkcore\/state-and-event-handling#Handling-errors-during-the-loading-and-decoding-of-advertisements","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling#Handling-errors-during-the-loading-and-decoding-of-advertisements"},"doc://com.adsdk.core/tutorials/AdSDKCore/Creating-Customised-Advertising#State-and-event-management":{"url":"\/tutorials\/adsdkcore\/creating-customised-advertising#State-and-event-management","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#State-and-event-management","kind":"section","abstract":[{"type":"text","text":"In this tutorial, we will learn how to create custom ads using Nextgen AdSDK. This process is the same for both inline and interstitial ads."}],"title":"State and event management","role":"pseudoSymbol","type":"section"},"doc://com.adsdk.core/documentation/AdSDKCore/AdEvent":{"kind":"symbol","role":"symbol","type":"topic","navigatorTitle":[{"text":"AdEvent","kind":"identifier"}],"title":"AdEvent","abstract":[{"type":"text","text":"A representation of the "},{"isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement","type":"reference"},{"text":" events.","type":"text"}],"url":"\/documentation\/adsdkcore\/adevent","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"text":"AdEvent","kind":"identifier"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdEvent"},"doc://com.adsdk.core/tutorials/AdSDKCore/Create-And-Display-Inline-Ads#Loading-and-displaying-advertisements":{"url":"\/tutorials\/adsdkcore\/create-and-display-inline-ads#Loading-and-displaying-advertisements","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-And-Display-Inline-Ads#Loading-and-displaying-advertisements","kind":"section","abstract":[{"type":"text","text":"This tutorial will guide you in creating a simple app that can load and display a list of advertisement."}],"title":"Loading and displaying advertisements","role":"pseudoSymbol","type":"section"},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement/statePublisher":{"kind":"symbol","required":true,"role":"symbol","type":"topic","title":"statePublisher","abstract":[{"type":"text","text":"Advertisement state publisher."}],"url":"\/documentation\/adsdkcore\/advertisement\/statepublisher","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"text":"statePublisher","kind":"identifier"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:7Combine12AnyPublisherV","text":"AnyPublisher"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:9AdSDKCore0A5StateO","text":"AdState"},{"text":", ","kind":"text"},{"text":"Never","kind":"typeIdentifier","preciseIdentifier":"s:s5NeverO"},{"kind":"text","text":">"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/statePublisher"},"doc://com.adsdk.core/tutorials/Meet-AdSDK/Working-with-the-built-in-capabilities-of-the-SDK":{"title":"Working with the built-in capabilities of the SDK","type":"topic","url":"\/tutorials\/meet-adsdk\/working-with-the-built-in-capabilities-of-the-sdk","identifier":"doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK\/Working-with-the-built-in-capabilities-of-the-SDK","kind":"article","abstract":[],"role":"article"},"doc://com.adsdk.core/tutorials/AdSDKCore/Create-and-Display-Interstitial-Ad":{"kind":"project","role":"project","type":"topic","title":"Create and display interstitial ad","abstract":[{"type":"text","text":"A full-screen advertisement that fills the host app’s interface is known as an interstitial ad. In this tutorial we are going to add interstitial ad into our application."}],"url":"\/tutorials\/adsdkcore\/create-and-display-interstitial-ad","estimatedTime":"15min","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-and-Display-Interstitial-Ad"},"doc://com.adsdk.core/tutorials/AdSDKCore/State-And-Event-Handling#Observing-the-advertising-events":{"title":"Observing the advertising events","type":"section","url":"\/tutorials\/adsdkcore\/state-and-event-handling#Observing-the-advertising-events","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling#Observing-the-advertising-events","kind":"section","abstract":[{"type":"text","text":"This tutorial will help you observe and respond to changes in the state and events of advertisements. In it, we will continue the development of the application we started in the previous section."}],"role":"pseudoSymbol"},"doc://com.adsdk.core/tutorials/AdSDKCore/State-And-Event-Handling":{"kind":"project","role":"project","type":"topic","title":"Handling the state and events of advertising","abstract":[{"type":"text","text":"This tutorial will help you observe and respond to changes in the state and events of advertisements. In it, we will continue the development of the application we started in the previous section."}],"url":"\/tutorials\/adsdkcore\/state-and-event-handling","estimatedTime":"25min","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/State-And-Event-Handling"},"doc://com.adsdk.core/tutorials/Meet-AdSDK":{"title":"Meet nextgen AdSDK","type":"topic","url":"\/tutorials\/meet-adsdk","identifier":"doc:\/\/com.adsdk.core\/tutorials\/Meet-AdSDK","kind":"overview","abstract":[{"type":"text","text":"Manage, display, and create your custom advertisements on iOS using cutting-edge technologies such as Combine, Modern Concurrency, and SwiftUI based on the AdSDK."}],"role":"overview"},"doc://com.adsdk.core/tutorials/AdSDKCore/Defining-Size-Of-Ad":{"kind":"project","role":"project","type":"topic","title":"Defining the size of the advertisement","abstract":[{"type":"text","text":"This tutorial will teach you how to define the size of the advertisement, taking into account the aspect ratio parameter. In it, we will continue the development of the application we started in the previous section."}],"url":"\/tutorials\/adsdkcore\/defining-size-of-ad","estimatedTime":"15min","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Defining-Size-Of-Ad"},"01-state-event-handling.swift":{"highlights":[],"content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","","    init(_ ad: Advertisement) {","        self.ad = ad","        state = .ready(ad)","    }","}","\/\/ ..."],"type":"file","syntax":"swift","fileName":"AdCell.swift","identifier":"01-state-event-handling.swift","fileType":"swift"},"doc://com.adsdk.core/tutorials/AdSDKCore/Create-And-Display-Inline-Ads#First-steps-for-working-with-AdSDK":{"kind":"section","role":"pseudoSymbol","type":"section","title":"First steps for working with AdSDK","abstract":[{"type":"text","text":"This tutorial will guide you in creating a simple app that can load and display a list of advertisement."}],"url":"\/tutorials\/adsdkcore\/create-and-display-inline-ads#First-steps-for-working-with-AdSDK","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-And-Display-Inline-Ads#First-steps-for-working-with-AdSDK"},"doc://com.adsdk.core/tutorials/AdSDKCore/Global-AdRequest-Parameters#Modifying-global-parameters":{"title":"Modifying global parameters","type":"section","url":"\/tutorials\/adsdkcore\/global-adrequest-parameters#Modifying-global-parameters","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Global-AdRequest-Parameters#Modifying-global-parameters","kind":"section","abstract":[{"type":"text","text":"We already know how to create an "},{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest","type":"reference","isActive":true},{"text":". However, an ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest"},{"text":" can have additional parameters beyond those you pass during initialization. These additional parameters are global for all ","type":"text"},{"code":"AdRequests","type":"codeVoice"},{"text":". The SDK provides the ability to add global parameters once so that you don’t have to copy them when creating each ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest","isActive":true},{"type":"text","text":"."}],"role":"pseudoSymbol"},"doc://com.adsdk.core/tutorials/AdSDKCore/Load-And-Cache-Assets":{"kind":"project","role":"project","type":"topic","title":"Download and cache ad assets in your custom ads","abstract":[{"type":"text","text":"Last time we created our custom advert, in which we display an image received from the server. This time, we will refactor the code related to loading the image and add caching."}],"url":"\/tutorials\/adsdkcore\/load-and-cache-assets","estimatedTime":"15min","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Load-And-Cache-Assets"},"doc://com.adsdk.core/documentation/AdSDKCore/AdState/loading":{"kind":"symbol","role":"symbol","type":"topic","title":"AdState.loading","abstract":[{"type":"text","text":"Signals that the advertisement data is currently being loaded from the server."}],"url":"\/documentation\/adsdkcore\/adstate\/loading","fragments":[{"text":"case","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"loading"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/loading"},"doc://com.adsdk.core/documentation/AdSDKCore/AdError/decoding":{"kind":"symbol","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"kind":"identifier","text":"decoding"}],"type":"topic","url":"\/documentation\/adsdkcore\/aderror\/decoding","title":"AdError.decoding","role":"symbol","abstract":[{"type":"text","text":"Error related to data decoding."}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdError\/decoding"},"doc://com.adsdk.core/tutorials/AdSDKCore/Create-And-Display-Inline-Ads":{"kind":"project","role":"project","type":"topic","title":"Create and display inline ads","abstract":[{"type":"text","text":"This tutorial will guide you in creating a simple app that can load and display a list of advertisement."}],"url":"\/tutorials\/adsdkcore\/create-and-display-inline-ads","estimatedTime":"20min","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-And-Display-Inline-Ads"},"04-state-event-handling.swift":{"content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() {","        Task {","            for await state in ad.stateStream {","                switch state {","                case .loading, .caching:","                    self.state = .loading","                case .readyToPresent(let metadata):","                    self.state = .ready(ad)","                case .error(let error):","                    guard let error = error as? AdError,","                          case .decoding = error else {","                        return self.state = .error","                    }","","                    \/\/ Handle decoding error","","                @unknown default: break","                }","            }","        }","    }","}","\/\/ ..."],"fileName":"AdCell.swift","fileType":"swift","highlights":[{"line":26},{"line":27},{"line":28},{"line":29},{"line":31},{"line":32}],"identifier":"04-state-event-handling.swift","type":"file","syntax":"swift"},"doc://com.adsdk.core/documentation/AdSDKCore/AdRequest":{"abstract":[{"text":"Describes a request to load an advertisement.","type":"text"}],"title":"AdRequest","url":"\/documentation\/adsdkcore\/adrequest","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdRequest","kind":"symbol","role":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AdRequest"}],"navigatorTitle":[{"kind":"identifier","text":"AdRequest"}]},"doc://com.adsdk.core/tutorials/AdSDKCore/Load-And-Cache-Assets#Asset-loading-and-caching":{"kind":"section","type":"section","url":"\/tutorials\/adsdkcore\/load-and-cache-assets#Asset-loading-and-caching","title":"Asset loading and caching","role":"pseudoSymbol","abstract":[{"type":"text","text":"Last time we created our custom advert, in which we display an image received from the server. This time, we will refactor the code related to loading the image and add caching."}],"identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Load-And-Cache-Assets#Asset-loading-and-caching"},"06-state-event-handling.swift":{"content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","    private var retryCount = Int.zero","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() { \/* ... *\/ }","}","\/\/ ..."],"fileName":"AdCell.swift","fileType":"swift","highlights":[],"identifier":"06-state-event-handling.swift","type":"file","syntax":"swift"},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement/state":{"kind":"symbol","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"state","kind":"identifier"},{"kind":"text","text":": "},{"text":"AdState","kind":"typeIdentifier","preciseIdentifier":"s:9AdSDKCore0A5StateO"}],"type":"topic","url":"\/documentation\/adsdkcore\/advertisement\/state","title":"state","role":"symbol","abstract":[{"type":"text","text":"Current "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState"},{"text":" of ","type":"text"},{"code":"Advertisement","type":"codeVoice"},{"text":".","type":"text"}],"required":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/state"},"doc://com.adsdk.core/tutorials/AdSDKCore/Creating-Customised-Advertising#Registering-a-renderer-in-the-SDK":{"url":"\/tutorials\/adsdkcore\/creating-customised-advertising#Registering-a-renderer-in-the-SDK","title":"Registering a renderer in the SDK","role":"pseudoSymbol","kind":"section","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#Registering-a-renderer-in-the-SDK","abstract":[{"text":"In this tutorial, we will learn how to create custom ads using Nextgen AdSDK. This process is the same for both inline and interstitial ads.","type":"text"}],"type":"section"},"doc://com.adsdk.core/tutorials/AdSDKCore/Creating-Customised-Advertising":{"kind":"project","estimatedTime":"1hr 0min","type":"topic","url":"\/tutorials\/adsdkcore\/creating-customised-advertising","title":"Creating customised advertising","role":"project","abstract":[{"text":"In this tutorial, we will learn how to create custom ads using Nextgen AdSDK. This process is the same for both inline and interstitial ads.","type":"text"}],"identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising"},"doc://com.adsdk.core/documentation/AdSDKCore/AdState/caching":{"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/caching","title":"AdState.caching","url":"\/documentation\/adsdkcore\/adstate\/caching","kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"kind":"identifier","text":"caching"}],"abstract":[{"type":"text","text":"Signals that the advertisement assets are currently being cached."}],"type":"topic"},"07-state-event-handling.swift":{"content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","    private var retryCount = Int.zero","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() { \/* ... *\/ }","","    func observeEvents() {","        Task {","            for await event in ad.eventStream {","                print(event)","            }","        }","    }","","    \/\/ Combine","    \/*","    func observeEvents() {","        ad.eventPublisher","            .sink { [weak self] event in","                print(event)","            }","            .store(in: &subscriptions)","    }","    *\/","}","\/\/ ..."],"fileName":"AdCell.swift","fileType":"swift","highlights":[{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37}],"identifier":"07-state-event-handling.swift","type":"file","syntax":"swift"},"doc://com.adsdk.core/documentation/AdSDKCore/AdState":{"kind":"symbol","url":"\/documentation\/adsdkcore\/adstate","type":"topic","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"AdState"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"AdState"}],"abstract":[{"text":"A representation of the ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement","isActive":true},{"type":"text","text":" life cycle."}],"title":"AdState"},"doc://com.adsdk.core/documentation/AdSDKCore/AdState/readyToPresent(metadata:)":{"kind":"symbol","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"kind":"identifier","text":"readyToPresent"},{"kind":"text","text":"("},{"text":"metadata","kind":"externalParam"},{"kind":"text","text":": "},{"text":"AdMetadata","kind":"typeIdentifier","preciseIdentifier":"s:9AdSDKCore0A8MetadataC"},{"text":")","kind":"text"}],"type":"topic","url":"\/documentation\/adsdkcore\/adstate\/readytopresent(metadata:)","title":"AdState.readyToPresent(metadata:)","role":"symbol","abstract":[{"text":"Signals that the advertisement is now ready to be displayed for the user.","type":"text"}],"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/AdState\/readyToPresent(metadata:)"},"doc://com.adsdk.core/tutorials/AdSDKCore/Create-and-Display-Interstitial-Ad#Presenting-interstitial":{"type":"section","url":"\/tutorials\/adsdkcore\/create-and-display-interstitial-ad#Presenting-interstitial","title":"Presenting interstitial","identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Create-and-Display-Interstitial-Ad#Presenting-interstitial","role":"pseudoSymbol","kind":"section","abstract":[{"text":"A full-screen advertisement that fills the host app’s interface is known as an interstitial ad. In this tutorial we are going to add interstitial ad into our application.","type":"text"}]},"doc://com.adsdk.core/documentation/AdSDKCore/Advertisement/eventStream":{"kind":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"eventStream"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:ScS","text":"AsyncStream"},{"kind":"text","text":"<"},{"text":"AdEvent","preciseIdentifier":"s:9AdSDKCore0A5EventO","kind":"typeIdentifier"},{"kind":"text","text":">"}],"type":"topic","url":"\/documentation\/adsdkcore\/advertisement\/eventstream","title":"eventStream","role":"symbol","abstract":[{"text":"Advertisement async event stream.","type":"text"}],"required":true,"identifier":"doc:\/\/com.adsdk.core\/documentation\/AdSDKCore\/Advertisement\/eventStream"},"03-state-event-handling.swift":{"content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() {","        Task {","            for await state in ad.stateStream {","                switch state {","                case .loading, .caching:","                    self.state = .loading","                case .readyToPresent(let metadata):","                    self.state = .ready(ad)","                case .error(let error):","                    self.state = .error","","                @unknown default: break","                }","            }","        }","    }","}","\/\/ ..."],"fileName":"AdCell.swift","fileType":"swift","highlights":[],"identifier":"03-state-event-handling.swift","syntax":"swift","type":"file"},"05-state-event-handling.swift":{"highlights":[{"line":9},{"line":28},{"line":29},{"line":33},{"line":34}],"type":"file","fileName":"AdCell.swift","syntax":"swift","fileType":"swift","identifier":"05-state-event-handling.swift","content":["\/\/ ...","@Observable","@MainActor","final class AdCellViewModel: Identifiable {","    let id = UUID()","    var state: CellState = .loading","","    private let ad: Advertisement","    private var retryCount = Int.zero","","    init(_ ad: Advertisement) {","        self.ad = ad","        observeState()","    }","}","","private extension AdCellViewModel {","    func observeState() {","        Task {","            for await state in ad.stateStream {","                switch state {","                case .loading, .caching:","                    self.state = .loading","                case .readyToPresent(let metadata):","                    self.state = .ready(ad)","                case .error(let error):","                    guard let error = error as? AdError,","                          case .decoding = error,","                          retryCount == .zero else {","                        return self.state = .error","                    }","","                    retryCount += 1","                    ad.reload()","","                @unknown default: break","                }","            }","        }","    }","}","\/\/ ..."]},"doc://com.adsdk.core/tutorials/AdSDKCore/Creating-Customised-Advertising#Creating-a-business-layer":{"title":"Creating a business layer","url":"\/tutorials\/adsdkcore\/creating-customised-advertising#Creating-a-business-layer","role":"pseudoSymbol","kind":"section","abstract":[{"text":"In this tutorial, we will learn how to create custom ads using Nextgen AdSDK. This process is the same for both inline and interstitial ads.","type":"text"}],"identifier":"doc:\/\/com.adsdk.core\/tutorials\/AdSDKCore\/Creating-Customised-Advertising#Creating-a-business-layer","type":"section"},"11-state-event-handling.swift":{"highlights":[],"type":"file","fileName":"AdCell.swift","syntax":"swift","fileType":"swift","identifier":"11-state-event-handling.swift","content":["\/\/ ...","private extension AdCellViewModel {","    func observeState() { \/* ... *\/ }","","    func observeEvents() {","        Task {","            for await event in ad.eventStream {","                switch event {","                case let .tap(url, metadata):","                    print(\"The user tapped on the advertisement.\")","                    print(\"SDK processed the following URL: \\(url)\")","","                case let .viewable(percentage, url, metadata):","                    print(\"\\(percentage) percent of the advertisement is visible.\")","                    print(\"SDK processed the following URL: \\(url)\")","","                default: break","                }","            }","        }","    }","}","\/\/ ..."]}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"value":"occ","op":"replace","path":"\/identifier\/interfaceLanguage"}]}]}